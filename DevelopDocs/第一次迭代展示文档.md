# 约束条件

## 1. 前端约束条件

### 1.1 时间相关约束

- 在产品路线图和资源甘特图的按小时显示的图中，**开始时间为当日00:00，结束时间为当日23:59**
- 在产品路线图和资源甘特图中，可选的时间显示单位为**按小时显示**和**按天显示**
- 在订单甘特图中，时间变量为T，所显示的订单是在T所表示的日期**有装配工作的订单**

- 在资源占用率图中，纵坐标为时间，横坐标为资源；可选的时间显示单位为**按天显示**和**按月显示**

### 1.2 逻辑相关约束

- 在资源管理界面，资源的删改必须满足条件：**当前时间之后该资源未被占用**
- 在资源管理界面，资源名称的命名需要符合如下规范
  - 人力资源：**前缀必须为{xx组}的形式，{xx}为组编号，可以是非数字，但不能重复**
  - 生产线资源：命名规范为**{line{xx}}，{xx}为机器编号，必须是非数字，且不能重复**



## 2. 算法约束条件

- 排程算法使用OptaPlanner的**时间槽模式(Time Slot Pattern)**
- 排程开始时间默认为**2018-11-13**
- 以**4小时（可变）**作为划分子订单的时间粒度
- 人力资源**周末**不工作，晚班在**周一早上07:00**前和**周五晚上19:00**后不工作

# Web Service接口
#### 遗留系统总共发布了4个Endpoint，分别对应人事系统、考勤系统、ERP系统以及订单管理系统。  

### 1. 人事系统对外提供2个服务接口
- getStaffInfoById：获取员工信息
- idAuthentication：身份认证  

### 2. 考勤系统对外提供2个服务接口
- getClassInfo：获取班次信息
- getCalendarInfo：获取人力资源（班组）排班信息

### 3. ERP系统对外提供6个服务接口
- getResourceTeamInfo：获取人力资源（班组）信息
- getMaterialInfoById：获取物品信息
- getLineResourceById：根据id获取生产线/设备资源信息
- getAllLineResources：获取所有生产线/设备资源信息
- getBOMById：根据id获取BOM信息
- getAllBOMs：获取所有BOM信息

### 4. 订单管理系统对外提供2个服务接口
- getOrderInfoById：根据id获取订单信息
- getAllOrders：获取所有订单信息


# 算法指标

## 1. 硬指标

- 单位资源（人力/生产线）在同一时间粒度只能进行一项工作
- 订单的生产必须满足相应的资源需求（人力/生产线）
- 人力资源应当在相应的时间才能工作

## 2. 软指标

- 订单交付时间不延期
- 资源（人力/生产线）使用情况负载均衡

## 3. 思想
- 在满足各种资源、订单排程约束的情况下，选取交付时间最佳的排程结果，尽可能保证交付不延期，并且适量的优化资源负载使其均衡
